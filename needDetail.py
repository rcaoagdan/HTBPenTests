#!/usr/bin/env python3

# Script: Need Detail
# Description: Reconnaissance Tool
# Author: Ray Caoagdan

##############################################################################
# Details & Disclaimer
##############################################################################
# The purpose of this script is to help aid in reconnsaince of a pentest. 
# Plsease ensure you have permission on any network you use this script on
# DO NOT USE THIS ON ANY NETWORK / PUBLIC NETWORK you do not own or 
# have permission to enummerate. 
#
# This script will test ping, use nmap to check for vulnerabilities, and 
# gobuster to enummerate any directoires on a webserver. If needed install 
# both nmap and gobuster onto machine before running this script.
#
# 
##############################################################################

##############################################################################
#                               Dogma Inc.                                   #                                     
##############################################################################

import os,sys
import socket
import nmap


target_IP = input("Enter target IP: ")
print(" ")

pingTarget = os.system("ping -c 4 " + target_IP)
print(" ")
print("*" * 85)

##############################################################################
# Functions
##############################################################################
def checkConnections():
    print(" ")
    while pingTarget == 0:
        checkVulnerabilites()        
    else:
        print ("NO CONNECTION CAN BE MADE")
        exit

def checkVulnerabilites():
    print("Scanning for Open Ports \n")
    os.system("nmap -A " + target_IP)
    print(" ")
    checkDirectory()
   
def checkDirectory():
    
    print("Looking through Directories \n")
    target_website = input("Enter target website: ")
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    portCheck = (target_IP, 80)
    port_results = sock.connect_ex((portCheck))

    if port_results == 0:
        os.system("gobuster dir -w /usr/share/dirb/wordlists/common.txt -u " + target_website)
        print("*" * 85)
        print("Looking through Sub Directories \n")
        os.system("gobuster vhost -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt -u " + target_website + " -r")
        exit
    else:
        print("Port is Closed")
        exit


##############################################################################
# main
##############################################################################
checkConnections()

